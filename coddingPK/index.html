<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini PK Multiplayer</title>
  <link rel="stylesheet" href="static/css/style.css" />
  <link rel="stylesheet" href="static/css/main.css" />
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
</head>
<body>
  <div id="login-panel">
    <h2 id="auth-title">ƒêƒÉng nh·∫≠p</h2>
    <input id="email-input" type="email" placeholder="Email c·ªßa b·∫°n" />
    <input id="password-input" type="password" placeholder="M·∫≠t kh·∫©u" />
    <input id="username-input" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n" maxlength="16" />
    <div class="auth-toggle">
      <span id="login-text">Ch∆∞a c√≥ t√†i kho·∫£n?</span>
      <a href="#" id="toggle-auth-mode">ƒêƒÉng k√Ω ngay</a>
    </div>
    <div class="login-buttons">
      <button id="auth-btn">ƒêƒÉng nh·∫≠p</button>
      <button id="google-login-btn" class="google-btn">
        <span class="google-icon">üåê</span>
        ƒêƒÉng nh·∫≠p v·ªõi Google
      </button>
    </div>
  </div>
  
  <div id="character-selection-panel" style="display:none">
    <h2>Ch·ªçn nh√¢n v·∫≠t v√† v≈© kh√≠</h2>
    
    <div class="character-select">
      <h3>Ch·ªçn nh√¢n v·∫≠t</h3>
      <div class="character-grid">
        <div class="character-option selected" data-char="warrior">
          <div class="char-preview warrior"></div>
          <h4>Warrior</h4>
          <p>HP: 150, Gi√°p +20%</p>
        </div>
        <div class="character-option" data-char="scout">
          <div class="char-preview scout"></div>
          <h4>Scout</h4>
          <p>T·ªëc ƒë·ªô +20%, HP: 100</p>
        </div>
        <div class="character-option" data-char="mage">
          <div class="char-preview mage"></div>
          <h4>Mage</h4>
          <p>NƒÉng l∆∞·ª£ng +30%, HP: 80</p>
        </div>
      </div>
    </div>

    <div class="weapon-select">
      <h3>V≈© kh√≠ ch√≠nh</h3>
      <div class="weapon-grid">
        <div class="weapon-option selected" data-weapon="pistol">
          <div class="weapon-preview pistol"></div>
          <h4>Pistol</h4>
          <p>C√¢n b·∫±ng</p>
        </div>
        <div class="weapon-option" data-weapon="shotgun">
          <div class="weapon-preview shotgun"></div>
          <h4>Shotgun</h4>
          <p>S√°t th∆∞∆°ng g·∫ßn</p>
        </div>
        <div class="weapon-option" data-weapon="rifle">
          <div class="weapon-preview rifle"></div>
          <h4>Rifle</h4>
          <p>T·∫•n c√¥ng xa</p>
        </div>
      </div>
    </div>

    <button id="continue-btn">Ti·∫øp t·ª•c</button>
  </div>
  <div id="room-panel" style="display:none">
    <!-- Current selection display -->
    <div class="current-selection">
      <h4>L·ª±a ch·ªçn hi·ªán t·∫°i</h4>
      <div class="selection-item" onclick="openCharacterModal()">
        <div class="selection-preview char-preview warrior" id="current-char-preview"></div>
        <div class="selection-info">
          <div class="name" id="current-char-name">Warrior</div>
          <div class="stats" id="current-char-stats">HP: 150, Gi√°p +20%</div>
        </div>
        <button class="change-btn">ƒê·ªïi</button>
      </div>
      <div class="selection-item" onclick="openWeaponModal()">
        <div class="selection-preview weapon-preview pistol" id="current-weapon-preview"></div>
        <div class="selection-info">
          <div class="name" id="current-weapon-name">Pistol</div>
          <div class="stats" id="current-weapon-stats">C√¢n b·∫±ng</div>
        </div>
        <button class="change-btn">ƒê·ªïi</button>
      </div>
    </div>

    <h2>Ch·ªçn ph√≤ng</h2>
    <button id="create-room-btn">T·∫°o ph√≤ng m·ªõi</button>
    <div id="room-list"></div>
  </div>
  
  <div id="map-selection-panel" style="display:none">
    <h2>Ch·ªçn b·∫£n ƒë·ªì</h2>
    <div class="map-options-container">
      <div class="map-option" data-map="classic">
        <div class="map-preview classic"></div>
        <div class="map-info">
          <h3>Classic Arena</h3>
          <p>B·∫£n ƒë·ªì c∆° b·∫£n v·ªõi 3 ch∆∞·ªõng ng·∫°i v·∫≠t</p>
        </div>
      </div>
      <div class="map-option" data-map="desert">
        <div class="map-preview desert"></div>
        <div class="map-info">
          <h3>Desert Storm</h3>
          <p>Sa m·∫°c v·ªõi ƒë·ªãa h√¨nh r·ªông</p>
        </div>
      </div>
      <div class="map-option" data-map="ice">
        <div class="map-preview ice"></div>
        <div class="map-info">
          <h3>Ice Field</h3>
          <p>BƒÉng gi√° v·ªõi nhi·ªÅu ch∆∞·ªõng ng·∫°i v·∫≠t</p>
        </div>
      </div>
    </div>
    <div class="map-buttons">
      <button id="confirm-map-btn">T·∫°o ph√≤ng</button>
      <button id="cancel-map-btn">Quay l·∫°i</button>
    </div>
  </div>
  <div id="game-ui" style="display:none">
    <div id="room-info" style="margin-bottom: 10px;">
      <span>Ph√≤ng: <span id="room-id"></span></span>
      <button id="leave-room-btn" style="margin-left: 10px;">Tho√°t ph√≤ng</button>
    </div>
    <div id="game-container"></div>
    <div id="info-panel">
      <div id="stats"></div>
    </div>
    <div id="game-guide" style="margin-top:18px;font-size:15px;color:#0ff;text-align:center;line-height:1.6;">
      <b>H∆∞·ªõng d·∫´n ch∆°i:</b><br>
      Di chuy·ªÉn: <b>W-A-S-D</b> ho·∫∑c <b>Ph√≠m m≈©i t√™n</b><br>
      B·∫Øn th∆∞·ªùng: <b>J</b> ho·∫∑c <b>0</b> &nbsp;|&nbsp; K·ªπ nƒÉng: <b>K</b> ho·∫∑c <b>1</b><br>
      T·∫°o gi√°p: <b>L</b> ho·∫∑c <b>2</b> (m·ªói l·ªõp gi√°p t·ªën 2 nƒÉng l∆∞·ª£ng, t·ªëi ƒëa 5 l·ªõp)<br>
      
      <div id="character-tips" style="margin-top:10px;color:#aaf;">
        <b>ƒê·∫∑c ƒëi·ªÉm nh√¢n v·∫≠t:</b><br>
        <span class="warrior-tips">Warrior: HP cao, gi√°p m·∫°nh h∆°n 20%</span><br>
        <span class="scout-tips">Scout: T·ªëc ƒë·ªô nhanh h∆°n 20%, gi·∫£m th·ªùi gian h·ªìi chi√™u</span><br>
        <span class="mage-tips">Mage: Ti√™u hao nƒÉng l∆∞·ª£ng √≠t h∆°n 30%, HP th·∫•p</span>
      </div>

      <div id="weapon-tips" style="margin-top:10px;color:#faa;">
        <b>V≈© kh√≠:</b><br>
        <span class="pistol-tips">Pistol: C√¢n b·∫±ng, t·ªëc ƒë·ªô b·∫Øn nhanh</span><br>
        <span class="shotgun-tips">Shotgun: S√°t th∆∞∆°ng cao t·∫ßm g·∫ßn, 3 vi√™n ƒë·∫°n</span><br>
        <span class="rifle-tips">Rifle: T·∫ßm xa, xuy√™n gi√°p 20%</span>
      </div>

      <div style="margin-top:10px;">
        Tho√°t ph√≤ng: <b>Tho√°t ph√≤ng</b> ho·∫∑c ƒë√≥ng tab
      </div>
    </div>
  </div>

  <!-- Character selection modal -->
  <div id="character-modal" class="selection-modal">
    <div class="modal-content">
      <h3>Ch·ªçn nh√¢n v·∫≠t</h3>
      <div class="modal-grid">
        <div class="character-option" data-char="warrior">
          <div class="char-preview warrior"></div>
          <h4>Warrior</h4>
          <p>HP: 150, Gi√°p +20%</p>
        </div>
        <div class="character-option" data-char="scout">
          <div class="char-preview scout"></div>
          <h4>Scout</h4>
          <p>T·ªëc ƒë·ªô +20%, HP: 100</p>
        </div>
        <div class="character-option" data-char="mage">
          <div class="char-preview mage"></div>
          <h4>Mage</h4>
          <p>NƒÉng l∆∞·ª£ng +30%, HP: 80</p>
        </div>
      </div>
      <div class="modal-buttons">
        <button class="confirm-btn" onclick="confirmCharacterChange()">X√°c nh·∫≠n</button>
        <button class="cancel-btn" onclick="closeCharacterModal()">H·ªßy</button>
      </div>
    </div>
  </div>

  <!-- Weapon selection modal -->
  <div id="weapon-modal" class="selection-modal">
    <div class="modal-content">
      <h3>Ch·ªçn v≈© kh√≠</h3>
      <div class="modal-grid">
        <div class="weapon-option" data-weapon="pistol">
          <div class="weapon-preview pistol"></div>
          <h4>Pistol</h4>
          <p>C√¢n b·∫±ng</p>
        </div>
        <div class="weapon-option" data-weapon="shotgun">
          <div class="weapon-preview shotgun"></div>
          <h4>Shotgun</h4>
          <p>S√°t th∆∞∆°ng g·∫ßn</p>
        </div>
        <div class="weapon-option" data-weapon="rifle">
          <div class="weapon-preview rifle"></div>
          <h4>Rifle</h4>
          <p>T·∫•n c√¥ng xa</p>
        </div>
      </div>
      <div class="modal-buttons">
        <button class="confirm-btn" onclick="confirmWeaponChange()">X√°c nh·∫≠n</button>
        <button class="cancel-btn" onclick="closeWeaponModal()">H·ªßy</button>
      </div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="static/js/firebase/firebase-config.js"></script>
  
  <!-- Game Configuration -->
  <script src="static/js/config/game-config.js"></script>
  
  <!-- Firebase Services -->
  <script src="static/js/firebase/database.js"></script>
  
  <!-- UI Components -->
  <script src="static/js/ui/panels.js"></script>
  <script src="static/js/ui/rooms-ui.js"></script>
  
  <!-- Game Core -->
  <script src="static/js/game/rooms.js"></script>
  <script src="static/js/game/player.js"></script>
  <script src="static/js/game/bullets.js"></script>
  <script src="static/js/game/renderer.js"></script>
  <script src="static/js/game/items.js"></script>
  <script src="static/js/game/game-loop.js"></script>
  
  <!-- Authentication -->
  <script src="static/js/auth/auth.js"></script>
  
  <!-- Main Game Logic -->
  <script src="static/js/game/game.js"></script>
  
  <!-- Debug Tools -->
  <script src="static/js/debug.js"></script>
  
  <!-- Main Entry Point -->
  <script src="static/js/main.js"></script>
</body>
</html>